В $\Z$ --- почти все элементы необратимы. Но можно перейти к  $\Q$ --- все ненулевые элементы  $\Z$ стали обратимы.

А мы хотим обобщить данную операцию на большое количество колец. То есть, пусть  $R$ --- кольцо,  $M \subset R$. Вопрос: можно ли сделать  $S$ --- кольцо, такое что  $R \subset S$ --- подкольцо в  $S$, причем любой элемент из  $M$ из  $S$ обратим.  

Заметим, что если $0 \in M$, то это плохо. Или в  $\Z / 4\Z$ если сделать $2$ обратимым, то  $2 \cdot 2 = 0$ --- обратим. 

\begin{definition}
    $R$ --- коммутативное кольцо.  $M \subset R$ называется мультипликативной системой, если:
     \begin{enumerate}
         \item $m_1, m_2 \in M \implies m_1m_2 \in M$.
         \item $0 \notin M$.
    \end{enumerate}
\end{definition}
\begin{example}
    $R$ --- область целостности.  $M = R \setminus \{0\}$ --- мультипликативная система.
\end{example}
\begin{definition}
    $M = R \setminus \{ 0\}$,  $R$ --- область целостности,  $R_m$ --- поле частных кольца  $R$ (и это будет поле).
\end{definition}
\begin{theorem}
    $M$ --- мультипликативная система в коммутативном кольце  $R$. Тогда  $\exists$ Кольцо  $R_M$ и инъективный гомоморфизм колец  $i\!: R \to R_M$ (вложение), такие что:
     \begin{enumerate}
         \item $i(x) \in R^*_M \quad \forall x \in M$,
         \item  Универсальное свойство:  $\forall \text{кольцо } S, \forall \text{гомоморфизм} f\!: R \to S$, такой что  $f(x) \in S^* \quad x \in M$  $\exists! g\!: R_m \to S$, такой что  $f = g \circ i$
    \end{enumerate}
\end{theorem}
\begin{remark}
    $R$ --- коммутативное кольцо. Тогда  $\exists K\!: R$ --- подкольцо  $K \iff R$ ---  область целостности.
\end{remark}
\begin{proof}[Доказательство теоремы]
    Будем считать, что $R$ --- область целостности,  $M = R \setminus \{0\}$.

    Будем вводить дроби. Для начала рассмотрим  $\widetilde{K} = R \times (R \setminus \{0\})$. Зададим на нем отношение эквивалентности:  $(a, b) \sim (c, d) \iff ad = bc$. Проверим данное утверждение:
     \begin{itemize}
         \item $(a, b) \sim (a, b) \Leftarrow ab = ab$.
         \item  $(a, b) \sim (c,d) \implies (c, d) \sim (a, b)$ по коммутативности.
         \item  $(a, b) \sim (c, d) \sim (e, f)$. Так как  $ad = bc \land cf = ed \implies a \cdot cf = ade = bce \iff acf = bce \xRightarrow{R\text{ --- о.ц.}} af = be \iff (a, b) \sim (e, f)$.
    \end{itemize}

    Обозначим $K = \widetilde{K} / \sim$.
    Зададим  $+, \cdot\!: K \times K \to K$:  $(a, b) + (c,d) = (ad + bc, bd), (a, b) \cdot (c, d) = (ac, bd)$.

    Тогда  $i\!: \begin{array}{l} R \to K \\ a \mapsto (a, 1) \end{array}$,  $a = \frac{a}{1}$. Надо проверить: определение и корректность, $(K, +, \cdot)$ --- поле,  $u$ --- инъективный гомоморфизм колец, универсальное свойство.

    Проверим определение: $(a, b) \sim (a_1, b_1)$. Тогда проверим, что $(a_1d + b_1c, b_1d) \sim (ad + bc, bd) \iff (a_1d + b_1c)bd = b_1d(ad+bc) \iff a_1 bd^2 + babcd = ab_1d^2+b_1cd \iff a_1b = ab_1$.

    Умножение --- определение.

    Проверим свойства сложения: ассоциативность $(\overline{(a, b)} + \overline{(c, d)}) + \overline{e, f} = \overline{(ad + bc, bd)} + \overline{(e, f)} = \overline{(adf + bcf + bde, bdf)}$. При этом  $\overline{(a, b)} + (\overline{(c, d)} + \overline{(e, f)}) = \overline{(a, b)} + \overline{(df+de, df)} = \overline{(adf + bcf + bde, bdf)}$

    $0_K \coloneqq (0, 1), (0, 1) + (a, b) = (0 \cdot b + a \cdot 1, 1 \cdot b) = (a, b)$.

    $-(a, b) = (-a, b)$ --- упражнение. 

    Ассоциативность умножение --- очевидно.

    Коммутативность умножения тоже.

    $1_K = \overline{(1, 1)}$  $(1, 1) \cdot (a, b) = (1 \cdot a, 1 \cdot b) = (a, b)$. 
    $(a+b)c = ac+bc$:  $(\overline{(a, d)} + \overline{(b, e)}) \overline{(c, f)} = \overline{(ae + bd, cd)} \cdot \overline{(c, f)} = \overline{(aec + bdc, edf)}$. В другое сторону лень.

     $\overline{(a, b)} \cdot \overline{(b, a)} = \overline{(ab, ab)} = \overline{(1, 1)} = 1$. Если  $a, b \neq 0, a \neq 0 \implies \overline{(a, b)}$ --- обратим.  $a = 0 \implies \overline{(0, b)} = \overline{(0, 1)} = 0$. Значит $K$ --- поле.

     Проверим, что  $i$ --- гомоморфизм:  $i(a) = \overline{(a, 1)}, i(b) = \overline{(b, 1)}, i(a+b) = \overline{(a+b, 1)}$.

     Будем обозначить  $\overline{(a, b)} \eqqcolon \frac{a}{b} = i(a) \cdot i(b)^{-1}$.

     Проверим универсальное свойство. $f\!: R \to S$ --- гомоморфизм.  $f(r) \in S^* \quad \forall r \neq 0$.  $f(r) = g \circ i(r) \iff f(r) = g(\frac{r}{1})$.

     $g(r) \cdot g(\frac{1}{r}) = g(1) = 1 = f(r) \cdot f(r)^{-1} \implies g(\frac{1}{r}) = f(r)^{-1} \implies g(\frac{r_1}{r}) \cdot g(\frac{1}{r}) = f(r) \cdot f(r_1)^{-1}$. 

     $g$ --- определено однозначно:  $g(\frac{a}{b}) = f(a) \cdot f(b)^{-1}$. 

     Корректность $\frac{a'}{b'} = \frac{a}{b} \iff a'b = b'a \implies f(a'b) = f(b'a) \iff f(a') \cdot f(b) = f(b') \cdot f(a) \iff f(a) f(b)^{-1} = f(a') \cdot f(b')^{-1}$--- $g$ не зависит от выбора представителя.
\end{proof}
\begin{example}
    Поле частных --- полная локализация.  $R$ --- ОГИ.  $p \in R$ --- простое.  $M = \{ x \in R \mid x \centernot \divby p\}$ --- мультипликативная система.  $R_M$ --- локальное кольцо (остался один просто элемент).
\end{example}
\begin{example}
    $R = \Z$: поле частных ---  $\Q$. 

    $R = K[X]$,  $K$ --- Поле частных называется  $K(x)$, поле дробнорациональных  функций.
\end{example}
\begin{remark}
    $Q \in K(x)$,  $\exists!\text{(с точностью до ассоциированности)} f,g\!: Q = \frac{f}{g}, (f, g) = 1$.
\end{remark}
\begin{proof}
    $Q = \frac{\widetilde{f}}{\widetilde{g}} \exists(\widetilde{f}, \widetilde{f}) = d, \widetilde{f} = df, \widetilde{g} = dg$, $(df, dg) \sim (f, g)$.

    Пусть  $\frac{f}{g} = \frac{f_1}{g_1}, (f_1, g_1) = 1 \implies fg_1 = gf_1, dg_1 \divby g \land (f, g) = 1 \implies g_1 \divby g$. Аналогично $g \divby g_1, f \divby f_1, f_1 \divby f$. $f = cf_1, g = cg_1, \deg(c) = 0$.
\end{proof}

$K(x)^*$ устроена понятно:  $\frac{f}{g} = \frac{\prod p_i^{a_i}}{\prod q_i^{b_o}} = a \prod \vphi_i^{c_i}$. где $\vphi_i$ --- унитальные неприводимые  $\in K[x], c_i \in \Z$.

Что со сложением: найдем БАЗИС  $K(x)$ над  $K$:  $P \cup F$.  $P = \{1, x, x^2, \ldots\}$ --- базис $K[x]$.  $F = \{ \frac{p}{q^l} \mid p, q\text{ --- унитальные} \land l\text{---неприводимый} \land \deg p < \deg q\}$ --- простейшие дроби.

\begin{theorem}
    $P\cup F$ --- базис.
\end{theorem}
\begin{proof}
    Шаг 1. $Q \in K(x) \implies \exists! R \in K[x]\!: Q = R + \frac{f}{g}, f, g \in K[x], \deg f < \deg g$. $Q \eqqcolon R + \frac{f}{g},Q = \frac{R}{1} + \frac{f}{g} = \frac{Rg+f}{g}$ правильная дробь.

    Пусть $Q_0 = \frac{f_0}{g_0}$. Положим $g = g_0$, $f_0 = R \cdot g_0 +f$ (теорема о делении с остатком). Откуда и получаем $Q = R + \frac{f}{g}$. 

    Единственность: $R + \frac{f}{g} = R' + \frac{f'}{g'}$. $R - R' = \frac{f'}{g'} - \frac{f}{g} = \frac{f'g - g'f}{gg'}$.

    $(R-R')gg' = f'g - g'f$. Если  $R - R' \neq 0 \implies \deg (R-R')gg' \ge \deg gg' = \deg g + \deg g'$, но $\deg f'g = \deg f' + \deg g < \deg g' + \deg g$. Для  $\deg fg'$ --- тоже самое.

    То есть  $\deg (f'g + fg') < \deg g + \deg'$. Противоречие.

    Осталось доказать:  $\forall$ правильная дробь однозначно представляется как сумма простейших. 
     \begin{definition}
        Правильная дробь называется примарной, если она представима в виде $\frac{f}{p^k}$, $p$ --- неприводимая,  $\deg f < \deg p^k$.
    \end{definition}
    
    Шаг 2. Любая правильная дробь --- сумма многочлена и примарных.
    
    Пусть правильная дробь $Q=\frac{p}{q_1^{a_1}q_2^{a_2}\ldots q_k^{a_k}}$, где $q_i$ -- неприводимы (неразложимы).
    
    Докажем по индукции:
    \begin{itemize}
         \item База: $k=1$. Очев. Сразу примарная
         \item Переход: $k \to k + 1$. Пусть $q \coloneqq \prod\limits_{i=1}^{k}q_i^{a_i}$. Но вспомним, что $q_i$ - неприводимы, значит $q$ и $q_{k + 1}$ взаимопросты, тогда $\exists f, g \in K[x] : fq + gq_{k+1}^{a_{k+1}} = 1$. Ну тогда $Q = \frac{p}{q\cdot q_{k + 1}^{a_{k + 1}}} = \frac{p\left(fq + gq_{k+1}^{a_{k+1}}\right)}{q\cdot q_{k + 1}^{a_{k + 1}}} = \frac{pf}{q_{k + 1}^{a_{k + 1}}} + \frac{pg}{q}$. Ну понятно, если надо, то поделим с остатком и вынесем многочлен. Первая дробь тогда примарна по определению. Вторая дробь раскладывается на примарные по индукционному предположению.
    \end{itemize}

    Шаг 3. Любая примарная дробь --- сумма многочлена и простейших дробей.

    Пусть $\frac{f}{p^k}$ --- примарная, $p$ --- неразложимая.  $\frac{f}{p^k} = F + \frac{h}{p^k}, F \in K[x], \frac{h}{p^k}$ --- правильная примарная. 

    $\exists h_0, h_1, h_2,\ldots, h_{k-1} \in K[x]\!: \deg h_i < \deg p$ и $f = h_0 + h_1 + h_2p^2 + \ldots + h_{k_1} p^{k-1}$. Обозначим это утверждение звездочкой.

    Тогда $\frac{h}{p^k} = \frac{h_0}{p^k} + \frac{h_1}{p^{k-1}} + \ldots + \frac{h_{k-1}}{p}$. Так как $\deg h_i < \deg P$, то данные дроби простейшие.

    Доказательство звездочки: индукция по  $k$.
     \begin{itemize}
         \item База. $k=1$:  $h = h_0$.
         \item Переход: $k \to k + 1$: Поделим с остатком  $h = p \cdot q + r, \deg r < \deg p$. Положим  $h_0 = r$.  $h = h_0 + p \cdot q$ и  $\deg q = \deg h - \deg p < \deg p^{k+1} - \deg p = \deg p^k$. Тогда по индукции  $q = h_1 + h_2 \cdot p + \ldots + h_k \cdot p^{k+1}$.
    \end{itemize}
\end{proof}

Давайте найдем явную формулу для $Q = \frac{f}{g}$, где $g=(x-a_1)\cdot \ldots \cdot (x-a_n)$ и $\deg f  < \deg g$.

Напишем Лагранжа для задачи  $(a_1, f(a_1)), \ldots, (a_n, f(a_n))$. $f = \sum\limits_{i=1}^n \frac{f(a_i)\prod\limits_{i \neq j} (x-a_j)}{\prod\limits_{j \neq i} (a_i - a_j)} = \sum\limits_{i=1}^n f(a_i) \frac{\frac{g}{x-a_i}}{g'(a_i)}$. Откуда получаем, что $\frac{f}{g} = \sum \frac{f(a_i)}{g'(a_i)} \cdot \frac{1}{x-a_i}$
